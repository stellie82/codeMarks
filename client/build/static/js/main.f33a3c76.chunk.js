(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t,n){e.exports=n(95)},49:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},83:function(e,t){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(41),o=n.n(r),i=n(2),c=n(3),l=n(5),u=n(4),h=n(6),p=n(98),d=n(100),m=n(99),g=n(97),f=(n(49),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"header"},s.a.createElement(g.a,{to:"/",className:"title"},"codemarks"),s.a.createElement("div",{className:"btn-row markOptions"},s.a.createElement("span",{className:"rounded-btn icon-btn-before popularMarks",onClick:this.props.handleViewPopularPosts},"Popular marks"),s.a.createElement("span",{className:"rounded-btn icon-btn-before recentMarks",onClick:this.handleViewRecentPosts},"Recent marks"),this.props.authenticated?s.a.createElement("span",{to:"/mine",className:"skyblue rounded-btn icon-btn-before myMarks",onClick:this.handleViewMyPosts},"My marks"):"",this.props.authenticated?s.a.createElement(g.a,{to:"/newpost",className:"lime rounded-btn icon-btn-before newMark"},"New mark"):""),this.props.authenticated?s.a.createElement("span",{className:"authStatus"},"Welcome back, ",this.props.user.social.github.username,".",s.a.createElement("a",{className:"red rounded-btn icon-btn-after signOut",href:"http://localhost:3001/auth/logout"},"Sign out")):s.a.createElement("span",{className:"authStatus"}))}}]),t}(a.Component)),v=n(9),b=n.n(v),E=(n(52),n(53),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){b.a.highlightAll()}},{key:"render",value:function(){return s.a.createElement("div",{className:"hero"},s.a.createElement("span",{className:"description"},"Code bookmarking and educational conversation"),s.a.createElement("pre",{className:"codePreview"},s.a.createElement("code",{className:"language-javascript"},"\nimport PriorityQueue from '../../../data-structures/priority-queue/PriorityQueue';\n\nexport default function dijkstra(graph, startVertex) {\n  // Init helper variables that we will need for Dijkstra algorithm.\n  const distances = {};\n  const visitedVertices = {};\n  const previousVertices = {};\n  const queue = new PriorityQueue();\n\n  // Init all distances with infinity assuming that currently we can't reach\n  // any of the vertices except the start one.\n  graph.getAllVertices().forEach((vertex) => {\n    distances[vertex.getKey()] = Infinity;\n    previousVertices[vertex.getKey()] = null;\n  });\n\n  // We are already at the startVertex so the distance to it is zero.\n  distances[startVertex.getKey()] = 0;\n\n  // Init vertices queue.\n  queue.add(startVertex, distances[startVertex.getKey()]);\n\n  // Iterate over the priority queue of vertices until it is empty.\n  while (!queue.isEmpty()) {\n    // Fetch next closest vertex.\n    const currentVertex = queue.poll();\n\n    // Iterate over every unvisited neighbor of the current vertex.\n    currentVertex.getNeighbors().forEach((neighbor) => {\n      // Don't visit already visited vertices.\n      if (!visitedVertices[neighbor.getKey()]) {\n        // Update distances to every neighbor from current vertex.\n        const edge = graph.findEdge(currentVertex, neighbor);\n\n        const existingDistanceToNeighbor = distances[neighbor.getKey()];\n        const distanceToNeighborFromCurrent = distances[currentVertex.getKey()] + edge.weight;\n\n        // If we've found shorter path to the neighbor - update it.\n        if (distanceToNeighborFromCurrent < existingDistanceToNeighbor) {\n          distances[neighbor.getKey()] = distanceToNeighborFromCurrent;\n\n          // Change priority of the neighbor in a queue since it might have became closer.\n          if (queue.hasValue(neighbor)) {\n            queue.changePriority(neighbor, distances[neighbor.getKey()]);\n          }\n\n          // Remember previous closest vertex.\n          previousVertices[neighbor.getKey()] = currentVertex;\n        }\n\n        // Add neighbor to the queue for further visiting.\n        if (!queue.hasValue(neighbor)) {\n          queue.add(neighbor, distances[neighbor.getKey()]);\n        }\n      }\n    });\n\n    // Add current vertex to visited ones to avoid visiting it again later.\n    visitedVertices[currentVertex.getKey()] = currentVertex;\n  }\n\n  // Return the set of shortest distances to all vertices and the set of\n  // shortest paths to all vertices in a graph.\n  return {\n    distances,\n    previousVertices,\n  };\n}")),this.props.user.social?"":s.a.createElement("span",null,s.a.createElement("a",{className:"github login",href:"http://localhost:3001/auth/github"},s.a.createElement("i",{className:"devicon-github-plain colored"}),"Sign in with GitHub"),s.a.createElement(g.a,{className:"local login",to:"/login/local"},"...or sign in with a username and password instead")))}}]),t}(a.Component)),y=n(43),w=n(25),C=n.n(w),j=(n(86),n(87),n(88),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={postKey:n.props.match.params.postKey,postDetails:{},postComments:[],postHasLoaded:!1,commentsAreRealtime:!1,userHighlightStart:-1,userHighlightEnd:-1},n.socket=null,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadPost()}},{key:"loadPost",value:function(){var e=this;return new Promise(function(t,n){if(e.state.postKey){var a="http://localhost:3001/api/posts/"+e.state.postKey;fetch(a,{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then(function(e){return e.json()}).then(function(t){t.content=b.a.highlight(atob(t.content),b.a.languages.javascript,"javascript"),e.setState({postDetails:t,postHasLoaded:!0})})}else n("A valid post ID was not provided.")})}},{key:"loadComments",value:function(){var e=this;this.socket=C.a.connect({query:{postKey:this.state.postKey}}),this.socket.on("connection",function(t){e.setState({commentsAreRealtime:!0})}),this.socket.on("disconnect",function(t){e.setState({commentsAreRealtime:!1})}),this.socket.on("existingComments",function(t){e.setState({postComments:t})}),this.socket.on("newComment",this.handleInboundNewComment)}},{key:"handleInboundNewComment",value:function(e){this.state.postHasLoaded&&(this.state.postComments.length>0?this.setState(function(t){return{postComments:[].concat(Object(y.a)(t.postComments),[e])}}):this.setState({postComments:[e]}))}},{key:"postNewComment",value:function(e){var t={author:this.props.authUser.id,text:e};this.state.userHighlightStart&&this.state.userHighlightEnd&&(t.highlightStart=this.state.userHighlightStart,t.highlightEnd=this.state.userHighlightEnd),this.socket.emit("newCommentRequest",t)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"postHeader"},s.a.createElement("span",{className:"postAuthor"},"Author",s.a.createElement("br",null),this.state.postDetails.author),s.a.createElement("br",null),s.a.createElement("span",{className:"postTitle"},"Title",s.a.createElement("br",null),this.state.postDetails.title),s.a.createElement("br",null),s.a.createElement("span",{className:"postDescription"},"Description",s.a.createElement("br",null),this.state.postDetails.description),s.a.createElement("br",null),s.a.createElement("pre",null,s.a.createElement("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:this.state.postDetails.content}}))))}}]),t}(a.Component)),N=(n(89),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={title:"",description:"",content:""},n.handleTitleChange=function(e){n.setState({title:e.target.value})},n.handleDescriptionChange=function(e){n.setState({description:e.target.value})},n.handleContentChange=function(e){n.setState({content:e.target.value})},n.postTitleInput=s.a.createRef(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.postTitleInput.current.focus()}},{key:"tryPublishPost",value:function(){var e={author:this.props.user._id,title:this.state.title,description:this.state.description,content:btoa(this.state.content)};console.clear(),console.log(e);var t={method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0,"Access-Control-Allow-Origin":"localhost:3001"},body:JSON.stringify(e)};fetch("http://localhost:3001/api/posts",t).then(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"compositionBox"},s.a.createElement("div",{className:"formStyle postAuthorName"},s.a.createElement("span",{className:"formStyleInput postAuthorName"},this.props.user.social?this.props.user.social.github.username:"")),s.a.createElement("div",{className:"formStyle postTitleBox"},s.a.createElement("input",{type:"text",name:"postTitleBox",className:"formStyleInput postTitleBox",ref:this.postTitleInput,onChange:this.handleTitleChange})),s.a.createElement("div",{className:"formStyle descriptionBox"},s.a.createElement("textarea",{id:"descriptionBox",name:"descriptionBox",className:"formStyleInput descriptionBox",onChange:this.handleDescriptionChange})),s.a.createElement("div",{className:"formStyle codeBox"},s.a.createElement("textarea",{id:"codeBox",name:"codeBox",className:"formStyleInput codeBox",onChange:this.handleContentChange})),s.a.createElement("div",{className:"btn-row submitActions"},s.a.createElement(g.a,{to:"/",className:"red rounded-btn icon-btn-before cancelPost"},"Cancel"),s.a.createElement("span",{className:"lime rounded-btn icon-btn-before publishPost",onClick:function(t){return e.tryPublishPost(t)}},"Publish your mark")))}}]),t}(a.Component)),k=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"Greeting",value:function(e){var t=this.props.user.provider;return"github"===t?s.a.createElement("h1",null,"You are logged in with your Github account"):"local"===t?s.a.createElement("h1",null,"You are logged in with your CODEMARKS account"):void 0}},{key:"render",value:function(){return s.a.createElement("div",null,this.Greeting())}}]),t}(a.Component),O=(n(90),n(91),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){b.a.highlightAll()}},{key:"render",value:function(){var e=b.a.highlight(atob(this.props.previewData.content),b.a.languages.javascript,"javascript");return s.a.createElement(g.a,{to:"/viewpost/"+this.props.previewData._id,className:"previewCard"},s.a.createElement("pre",{className:"codePreview"},s.a.createElement("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:e}})),s.a.createElement("div",{className:"tagContainer"},s.a.createElement("span",{className:"postTag"},"Android"),s.a.createElement("span",{className:"postTag"},"XML"),s.a.createElement("span",{className:"postTag"},"UI")),s.a.createElement("div",{className:"details"},s.a.createElement("span",{className:"title"},this.props.previewData.title),s.a.createElement("span",{className:"description"},this.props.previewData.description)))}}]),t}(a.Component)),x=(n(92),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={tagData:[]},n.loadTags=function(){fetch("http://localhost:3001/api/tags",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then(function(e){return e.json()}).then(function(e){n.setState({tagData:e})})},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadTags()}},{key:"renderTagList",value:function(){return this.state.tagData.map(function(e){return s.a.createElement("span",null,e.name)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"tagList"},this.renderTagList())}}]),t}(a.Component)),A=(n(93),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={user:!1,authenticated:!1,postPreviewData:[]},n.handleViewPopularPosts=function(){fetch("http://localhost:3001/api/posts",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then(function(e){return e.json()}).then(function(e){return n.setState({postPreviewData:e})})},n._handleLogoutClick=function(){window.open("http://localhost:3001/auth/logout","_self")},n._handleSignInClick=function(){window.open("http://localhost:3001/auth/github","_self")},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3001/auth/checkAuth",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then(function(e){if(200===e.status)return e.json();throw new Error("failed to authenticate user")}).then(function(t){e.setState({authenticated:!0,user:t.user})}).catch(function(t){e.setState({authenticated:!1,error:"Failed to authenticate user"})}).finally(this.handleViewPopularPosts())}},{key:"checkAuthState",value:function(){var e=this;fetch("/checkAuthState",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then(function(e){switch(e.status){case 200:return e.json();case 401:throw new Error("Unauthenticated.");default:throw new Error("Unexpected authentication state.")}}).then(function(t){return e.setState({user:t})}).catch(function(t){return e.setState({user:!1})})}},{key:"renderPreviewCards",value:function(){return this.state.postPreviewData.map(function(e){return s.a.createElement(O,{previewData:e})})}},{key:"render",value:function(){var e=this;return s.a.createElement(p.a,null,s.a.createElement(d.a,null,s.a.createElement(m.a,{exact:!0,path:"/",render:function(t){return s.a.createElement("div",{className:"container"},s.a.createElement(f,{authenticated:e.state.authenticated,user:e.state.user,handleViewPopularPosts:e.handleViewPopularPosts}),s.a.createElement("div",{className:"pageContent"},s.a.createElement(x,null),e.state.authenticated?"":s.a.createElement(E,{user:e.state.user}),s.a.createElement("div",{className:"cardBlock"},e.renderPreviewCards())))}}),s.a.createElement(m.a,{exact:!0,path:"/login/local",render:function(e){return s.a.createElement("div",null,"Login form here")}}),s.a.createElement(m.a,{path:"/viewpost/:postKey",render:function(t){return s.a.createElement("div",{className:"container"},s.a.createElement(f,{authenticated:e.state.authenticated,user:e.state.user,handleViewPopularPosts:e.handleViewPopularPosts}),s.a.createElement("div",{className:"pageContent"},s.a.createElement(j,t)))}}),s.a.createElement(m.a,{path:"/newpost",render:function(t){return s.a.createElement("div",{className:"container"},s.a.createElement(f,{authenticated:e.state.authenticated,user:e.state.user}),s.a.createElement("div",{className:"pageContent"},s.a.createElement(N,{user:e.state.user})))}}),s.a.createElement(m.a,{path:"/profile",render:function(e){return s.a.createElement("div",null,s.a.createElement(k,e))}})))}}]),t}(a.Component));o.a.render(s.a.createElement(A,null),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.f33a3c76.chunk.js.map